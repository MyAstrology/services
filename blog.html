<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>লোড হচ্ছে...</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body style="font-family:sans-serif;max-width:800px;margin:auto;line-height:1.6">
  <h1 id="post-title">লোড হচ্ছে...</h1>
  <img id="post-image" style="max-width:100%;border-radius:12px;margin:15px 0;display:none;">
  <div id="blog-content">লোড হচ্ছে...</div>

  <script>
    const params = new URLSearchParams(window.location.search);
    const postSlug = params.get('post') || 'palmistry-tips'; // ডিফল্ট ফাইল
    const filePath = `/src/content/blog/${postSlug}.md`;

    fetch(filePath)
      .then(response => {
        if (!response.ok) throw new Error("ফাইল পাওয়া যায়নি");
        return response.text();
      })
      .then(text => {
        // --- YAML front matter বের করা ---
        const match = /^---([\s\S]*?)---/.exec(text);
        let frontMatter = {};
        if (match) {
          const yaml = match[1].trim().split('\n');
          yaml.forEach(line => {
            const [key, value] = line.split(':');
            if (key && value) {
              frontMatter[key.trim()] = value.trim().replace(/^"|"$/g, '');
            }
          });
          text = text.replace(match[0], ''); // YAML অংশ মুছে ফেলা
        }

        // SEO Friendly Title, Meta Description, Image সেট করা
        if (frontMatter.title) {
          document.title = frontMatter.title + " | MyAstrology";
          document.getElementById('post-title').innerText = frontMatter.title;
        }
        if (frontMatter.description) {
          document.querySelector('meta[name="description"]').setAttribute('content', frontMatter.description);
        }
        if (frontMatter.image) {
          const img = document.getElementById('post-image');
          img.src = frontMatter.image.trim();
          img.style.display = 'block';
        }

        // Markdown content দেখানো
        document.getElementById('blog-content').innerHTML = marked.parse(text);
      })
      .catch(err => {
        document.getElementById('blog-content').innerHTML = "❌ ব্লগ লোড করা যাচ্ছে না!";
      });
  </script>
</body>
</html>
