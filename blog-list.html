<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶¨‡ßç‡¶≤‡¶ó | MyAstrology</title>
<meta name="description" content="‡¶π‡¶æ‡¶§‡ßá‡¶∞ ‡¶∞‡ßá‡¶ñ‡¶æ, ‡¶∞‡¶æ‡¶∂‡¶ø‡¶´‡¶≤, ‡¶ú‡ßç‡¶Ø‡ßã‡¶§‡¶ø‡¶∑ ‡¶ì ‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø ‡¶¨‡¶ø‡¶∑‡ßü‡ßá ‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶¨‡ßç‡¶≤‡¶ó ‡¶™‡ßú‡ßÅ‡¶®‡•§">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {font-family:sans-serif;background:#f9f9f9;margin:0;padding:20px;}
h1 {text-align:center;color:#333;}
.blog-container {
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:20px;
  max-width:1000px;
  margin:20px auto;
}
.blog-card {
  background:white;
  border-radius:12px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
  overflow:hidden;
  transition:transform 0.2s;
  text-decoration:none;
  color:#000;
}
.blog-card:hover {transform:translateY(-4px);}
.blog-card img {width:100%;height:160px;object-fit:cover;}
.blog-card .content {padding:15px;}
.blog-card h2 {font-size:18px;margin:0 0 10px;color:#222;}
.blog-card p {font-size:14px;color:#555;}

/* Search Box */
#search-bar { width:200px; padding:5px 10px; border-radius:20px; border:1px solid #ccc; margin-bottom:20px; }
#search-btn { padding:5px 10px; border-radius:6px; background:#b33; color:#fff; border:none; cursor:pointer; }
</style>
</head>
<body>

<h1>‡¶Ü‡¶Æ‡¶æ‡¶¶‡ßá‡¶∞ ‡¶¨‡ßç‡¶≤‡¶ó</h1>

<div style="text-align:center; margin-bottom:20px;">
  <input type="text" id="search-bar" placeholder="Search blogs...">
  <button id="search-btn">üîç</button>
</div>

<div id="blog-container" class="blog-container">
  <p>‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
</div>

<script>
const container = document.getElementById("blog-container");
const searchBar = document.getElementById("search-bar");
const searchBtn = document.getElementById("search-btn");

let blogs = [];

// Load blogs
fetch('/src/content/blog/list.json')
  .then(res => res.json())
  .then(data => {
    blogs = data;
    displayBlogs(blogs);
    
    // ‡¶Ø‡¶¶‡¶ø URL ‡¶è search ‡¶™‡ßç‡¶Ø‡¶æ‡¶∞‡¶æ‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞ ‡¶•‡¶æ‡¶ï‡ßá
    const params = new URLSearchParams(window.location.search);
    const searchQuery = params.get('search');
    if(searchQuery){
      searchBar.value = searchQuery;
      filterBlogs(searchQuery);
    }
  })
  .catch(err => {
    container.innerHTML = "<p>‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá!</p>";
    console.error(err);
  });

// Display blogs
function displayBlogs(blogList){
  container.innerHTML = "";
  if(blogList.length === 0){
    container.innerHTML = "<p>‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§</p>";
    return;
  }
  blogList.forEach(blog => {
    const a = document.createElement("a");
    a.href = `blog.html?post=${blog.slug}`;
    a.className = "blog-card";
    a.innerHTML = `
      <img src="${blog.image}" alt="${blog.title}">
      <div class="content">
        <h2>${blog.title}</h2>
        <p>${blog.description}</p>
      </div>
    `;
    container.appendChild(a);
  });
}

// Filter blogs
function filterBlogs(query){
  const filtered = blogs.filter(blog => 
    blog.title.toLowerCase().includes(query.toLowerCase()) || 
    blog.description.toLowerCase().includes(query.toLowerCase())
  );
  displayBlogs(filtered);
}

// Search events
searchBtn.addEventListener('click', () => {
  const query = searchBar.value.trim();
  filterBlogs(query);
});
searchBar.addEventListener('keypress', (e)=>{
  if(e.key==='Enter'){
    filterBlogs(searchBar.value.trim());
  }
});
</script>

</body>
</html>
